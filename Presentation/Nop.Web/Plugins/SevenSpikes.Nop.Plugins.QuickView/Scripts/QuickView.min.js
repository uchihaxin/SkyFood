/*
* Copyright 2014 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/

var quickViewButtonClassName = "quick-view-button", quickViewButtonClass = "." + quickViewButtonClassName; $(document).ready(function () { if (!($.isMobile() || !$.isMobile() && 768 >= $.getSpikesViewPort().width)) { var a = GetProductSelector(); if ("" != a) { var b = GetQuickViewButtonParentSelector(a); AddQuickViewButtons(a, b); $(document).on("nopAjaxCartProductAddedToCartEvent", function () { closeQuickViewWindow() }); $(document).on("nopAjaxFiltersFiltrationCompleteEvent", function () { AddQuickViewButtons(a, b) }); AddQuickViewWindowDialog() } } }); function AddQuickViewButtons(a, b) { var c = $(".quickViewData").attr("data-quickViewButtonText"); void 0 == c && (c = "Quick View"); var d = $(b); $(d).each(function () { var a = $(this).css("position"); "static" != a && "initial" != a || $(this).css("position", "relative"); 0 >= $(this).find(quickViewButtonClass).length && $(this).prepend('<div class="' + quickViewButtonClassName + '"><a>' + c + "</a></div>") }); $(quickViewButtonClass).off("click.quickview").on("click.quickview", function () { var b = $(this).parents(a).first().attr("data-productid"); "undefined" != typeof b && RetrieveQuickViewData(b) }) } function closeQuickViewWindow() { var a = $(".quickViewWindow").data("kendoWindow"); void 0 != a && "" != a.content() && a.close() } function AddQuickViewWindowDialog() { var a = $("body"); if (0 < a.length) { a.prepend('<div class="quickViewWindow"></div>'); var a = GetIsQuickViewPopupDraggable(), b = GetIsQuickViewPopupOverlayEnabled(); $(".quickViewWindow").kendoWindow({ minHeight: "330px", minWidth: "660px", draggable: a, resizable: !1, modal: b, actions: ["Close"], animation: !1, visible: !1, close: function () { $(".quickViewWindow").html($("").html()) } }).data("kendoWindow").wrapper.addClass("quickView") } } function ShowQuickViewWindow() { var a = $(".quickViewWindow").data("kendoWindow"), b = $("<div class='k-loading-mask'><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("700px").height("360px"); a.content(b); a.center(); a.open() } function ShowQuickView(a) { $(".quickViewWindow").data("kendoWindow").content(a) } function RetrieveQuickViewData(a) { var b = $(".quickViewData").attr("data-retrieveQuickViewUrl"); void 0 != b && $.ajax({ beforeSend: function () { ShowQuickViewWindow() }, cache: !1, type: "POST", data: $.toJSON({ productID: a }), contentType: "application/json; charset=utf-8", url: b, success: function (a) { ShowQuickView(a); a = $(".quickViewData").attr("data-accordionpanelsheightstyle"); $("#accordion").accordion({ collapsible: !0, icons: { header: "ui-icon-circle-arrow-e", activeHeader: "ui-icon-circle-arrow-s" }, heightStyle: a }); $.event.trigger({ type: "nopQuickViewDataShownEvent" }); a = $(".quickView").offset(); var b = $(".quickView").height(); $(window).height() < b ? $(".quickView").css("top", $(document).scrollTop() + 10) : $(".quickView").css("top", a.top - b / 4) }, error: function (a, b, e) { alert("Loading the page failed."); closeQuickViewWindow() } }) } function GetProductSelector() { var a = $(".quickViewData").attr("data-productselector"); return void 0 != a ? a : "" } function GetQuickViewButtonParentSelector(a) { var b = $(".quickViewData").attr("data-productselectorchild"); return "undefined" != typeof b && b != a && 0 < $(a + " " + b).length ? a + " " + b : a } function GetIsQuickViewPopupDraggable() { var a = $(".quickViewData").attr("data-isQuickViewPopupDraggable"); return void 0 != a && "True" == a ? !0 : !1 } function GetIsQuickViewPopupOverlayEnabled() { var a = $(".quickViewData").attr("data-enableQuickViewPopupOverlay"); return void 0 != a && "True" == a ? !0 : !1 };
